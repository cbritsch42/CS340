<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Spell Checker</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }
    #responses {
      margin-top: 20px;
      padding: 10px;
      border: 1px solid #ccc;
      max-width: 400px;
    }
    .response {
      padding: 5px;
      border-bottom: 1px solid #eee;
    }
  </style>
</head>
<body>
  <h2>Spell Checker</h2>
  <form id="textForm">
    <input type="text" id="textInput" placeholder="Type a word..." required>
    <button type="submit">Check</button>
  </form>

  <div id="responses"></div>

  <script>
    const form = document.getElementById('textForm');
    const input = document.getElementById('textInput');
    const responsesDiv = document.getElementById('responses');
    let dictionary = [];

    // Load dictionary.txt (must be in same folder)
    fetch('dictionary.txt')
      .then(response => response.text())
      .then(text => {
        dictionary = text.split(/\r?\n/).filter(word => word.trim().length > 0);
      })
      .catch(err => console.error("Error loading dictionary:", err));

    // Helper: check if a character is a vowel
    function isVowel(ch) {
      return 'aeiou'.includes(ch.toLowerCase());
    }

    // Custom alignment scoring
    function alignmentDistance(a, b) {
      const m = a.length;
      const n = b.length;
      const dp = Array.from({ length: m + 1 }, () => Array(n + 1).fill(0));

      // Initialize gap penalties
      for (let i = 0; i <= m; i++) dp[i][0] = i * 2;
      for (let j = 0; j <= n; j++) dp[0][j] = j * 2;

      for (let i = 1; i <= m; i++) {
        for (let j = 1; j <= n; j++) {
          const charA = a[i - 1].toLowerCase();
          const charB = b[j - 1].toLowerCase();

          let cost;
          if (charA === charB) {
            cost = 0; // exact match
          } else if (isVowel(charA) && isVowel(charB)) {
            cost = 1; // vowel-vowel mismatch
          } else if (!isVowel(charA) && !isVowel(charB)) {
            cost = 1; // consonant-consonant mismatch
          } else {
            cost = 3; // vowel-consonant mismatch
          }

          dp[i][j] = Math.min(
            dp[i - 1][j - 1] + cost, // substitution
            dp[i - 1][j] + 2,        // deletion (gap)
            dp[i][j - 1] + 2         // insertion (gap)
          );
        }
      }
      return dp[m][n];
    }

    form.addEventListener('submit', function(event) {
      event.preventDefault();
      const word = input.value.trim().toLowerCase();
      if (!word || dictionary.length === 0) return;

      // Compute distances
      const scored = dictionary.map(dictWord => ({
        word: dictWord,
        score: alignmentDistance(word, dictWord.toLowerCase())
      }));

      // Sort by score (lower = better)
      scored.sort((a, b) => a.score - b.score);

      // Take top 10 matches
      const bestMatches = scored.slice(0, 10);

      // Display results
      responsesDiv.innerHTML = '';
      bestMatches.forEach(match => {
        const div = document.createElement('div');
        div.className = 'response';
        div.textContent = `${match.word} (score: ${match.score})`;
        responsesDiv.appendChild(div);
      });
    });
  </script>
</body>
</html>
